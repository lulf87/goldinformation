/* 字体导入 - IBM Plex Sans (专业金融) - 必须在最前面 */
@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========================================
   DESIGN SYSTEM - GOLD TRADING PROJECT
   ======================================== */

/* ========================================
   CSS CUSTOM PROPERTIES (设计令牌)
   ======================================== */

@layer base {
  :root {
    /* 主配色 - 蓝色系 (专业金融) */
    --color-primary: #2563EB;
    --color-primary-light: #3B82F6;
    --color-primary-dark: #1D4ED8;

    /* CTA 配色 - 橙色 (行动号召) */
    --color-cta: #F97316;
    --color-cta-light: #FB923C;
    --color-cta-dark: #EA580C;

    /* 交易配色 - 涨跌 */
    --trend-up: #26A69A;        /* 上涨 - 绿色 */
    --trend-down: #EF5350;      /* 下跌 - 红色 */
    --trend-neutral: #94A3B8;   /* 中性 - 灰色 */

    /* 信号强度渐变 */
    --signal-strong-buy: linear-gradient(135deg, #10B981 0%, #34D399 100%);
    --signal-buy: linear-gradient(135deg, #34D399 0%, #6EE7B7 100%);
    --signal-hold: linear-gradient(135deg, #94A3B8 0%, #CBD5E1 100%);
    --signal-sell: linear-gradient(135deg, #FB923C 0%, #FBBF24 100%);
    --signal-strong-sell: linear-gradient(135deg, #EF4444 0%, #F87171 100%);

    /* 风险等级配色 */
    --risk-low: #10B981;        /* 低风险 - 绿色 */
    --risk-medium: #F97316;     /* 中风险 - 橙色 */
    --risk-high: #EF4444;       /* 高风险 - 红色 */

    /* 数据密度背景色 (暗色模式) */
    --data-bg-high: rgba(15, 23, 42, 0.95);
    --data-bg-medium: rgba(15, 23, 42, 0.85);
    --data-bg-low: rgba(15, 23, 42, 0.70);

    /* 技术指标颜色 */
    --indicator-ma-short: #26A69A;  /* MA20 - 绿色 */
    --indicator-ma-mid: #F97316;    /* MA60 - 橙色 */
    --indicator-ma-long: #2563EB;   /* MA200 - 蓝色 */
    --indicator-bollinger: #8B5CF6; /* 布林带 - 紫色 */

    /* 图表颜色 */
    --chart-grid: #334155;
    --chart-axis: #475569;
    --chart-line-primary: #2563EB;
    --chart-line-secondary: #F97316;
    --chart-area-fill: rgba(37, 99, 235, 0.1);

    /* 间距令牌 (匹配设计系统) */
    --space-xs: 4px;
    --space-sm: 8px;
    --space-md: 16px;
    --space-lg: 24px;
    --space-xl: 32px;
    --space-2xl: 48px;
    --space-3xl: 64px;

    /* 阴影深度 (匹配设计系统) */
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
    --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
    --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.15);

    /* 过渡时长 (匹配设计系统) */
    --transition-fast: 150ms;
    --transition-base: 200ms;
    --transition-medium: 300ms;
    --transition-slow: 400ms;

    /* Z-index 层级 (匹配设计系统) */
    --z-dropdown: 10;
    --z-sticky: 20;
    --z-fixed: 30;
    --z-modal-backdrop: 40;
    --z-modal: 50;
    --z-popover: 60;
    --z-tooltip: 70;
  }

  /* 浅色模式变量 */
  .light {
    --color-background: #F8FAFC;
    --color-text: #1E293B;
    --color-text-muted: #64748B;
    --color-border: #E2E8F0;

    --data-bg-high: rgba(255, 255, 255, 0.95);
    --data-bg-medium: rgba(255, 255, 255, 0.90);
    --data-bg-low: rgba(255, 255, 255, 0.80);

    --chart-grid: #E2E8F0;
    --chart-axis: #94A3B8;
  }

  /* 暗色模式变量 (默认) */
  .dark {
    --color-background: #0F172A;
    --color-text: #F8FAFC;
    --color-text-muted: #94A3B8;
    --color-border: #1E293B;
  }
}

/* ========================================
   基础样式重置
   ======================================== */

@layer base {
  * {
    box-sizing: border-box;
  }

  html {
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  body {
    font-family: 'IBM Plex Sans', system-ui, -apple-system, sans-serif;
    background-color: var(--color-background);
    color: var(--color-text);
    line-height: 1.6;
    overflow-x: hidden;
  }

  /* 标题样式 */
  h1, h2, h3, h4, h5, h6 {
    font-weight: 600;
    line-height: 1.3;
    color: var(--color-text);
  }

  h1 { font-size: 2.5rem; }
  h2 { font-size: 2rem; }
  h3 { font-size: 1.75rem; }
  h4 { font-size: 1.5rem; }
  h5 { font-size: 1.25rem; }
  h6 { font-size: 1rem; }

  /* 段落 */
  p {
    margin-bottom: var(--space-md);
    color: var(--color-text);
  }

  /* 链接 */
  a {
    color: var(--color-primary);
    text-decoration: none;
    transition: color var(--transition-base) ease;
  }

  a:hover {
    color: var(--color-primary-light);
  }

  /* 按钮 */
  button {
    font-family: inherit;
    cursor: pointer;
    border: none;
    background: none;
  }

  /* 输入框 */
  input, textarea, select {
    font-family: inherit;
    font-size: inherit;
    color: inherit;
  }

  /* 数字字体 */
  .font-mono {
    font-family: 'JetBrains Mono', 'Fira Code', monospace;
  }
}

/* ========================================
   可复用组件类
   ======================================== */

@layer components {
  /* 按钮组件 */
  .btn {
    @apply inline-flex items-center justify-center px-6 py-3 rounded-lg font-semibold;
    @apply transition-all duration-200 cursor-pointer;
    @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-primary;
  }

  .btn-primary {
    @apply bg-primary text-white hover:opacity-90 active:scale-95;
  }

  .btn-secondary {
    @apply bg-transparent border-2 border-primary text-primary;
    @apply hover:bg-primary hover:text-white active:scale-95;
  }

  .btn-cta {
    @apply bg-cta text-white hover:bg-cta-600 active:scale-95;
  }

  .btn-ghost {
    @apply bg-transparent text-text hover:bg-background/50;
  }

  /* 按钮状态 */
  .btn:disabled {
    @apply opacity-50 cursor-not-allowed pointer-events-none;
  }

.btn-loading {
      @apply opacity-50 cursor-not-allowed relative;
    }

  .btn-loading::after {
    content: "";
    @apply absolute w-4 h-4 border-2 border-current border-t-transparent rounded-full;
    @apply animate-spin;
  }

  /* 卡片组件 */
  .card {
    @apply bg-white dark:bg-background rounded-xl p-6 shadow-md;
    @apply transition-shadow duration-200;
  }

  .card-hoverable {
    @apply cursor-pointer hover:shadow-lg hover:-translate-y-1;
  }

  .card-glass {
    @apply bg-white/80 dark:bg-background/80 backdrop-blur-md;
  }

  /* 输入框组件 */
  .input {
    @apply w-full px-4 py-3 rounded-lg border;
    @apply focus:outline-none focus:ring-2 focus:ring-primary;
    @apply transition-colors duration-200;
  }

  .input-default {
    @apply border-gray-300 dark:border-gray-600 bg-white dark:bg-background;
    @apply text-text dark:text-text placeholder:text-text-muted;
  }

  /* 标签组件 */
  .badge {
    @apply inline-flex items-center px-3 py-1 rounded-full text-sm font-medium;
  }

  .badge-success {
    @apply bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200;
  }

  .badge-warning {
    @apply bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200;
  }

  .badge-danger {
    @apply bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200;
  }

  .badge-info {
    @apply bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200;
  }

  /* 模态框组件 */
  .modal-overlay {
    @apply fixed inset-0 bg-black/50 backdrop-blur-sm;
    @apply z-modal-backdrop transition-opacity duration-200;
  }

  .modal {
    @apply fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2;
    @apply bg-white dark:bg-background rounded-2xl shadow-xl p-8;
    @apply z-modal max-w-md w-[90%];
    @apply animate-slide-in;
  }

  /* 加载状态组件 */
  .skeleton {
    @apply bg-gray-200 dark:bg-gray-700 rounded animate-pulse;
  }

  .skeleton-text {
    @apply h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse;
  }

  .skeleton-avatar {
    @apply w-12 h-12 rounded-full bg-gray-200 dark:bg-gray-700 animate-pulse;
  }

  .spinner {
    @apply w-6 h-6 border-2 border-current border-t-transparent rounded-full;
    @apply animate-spin;
  }

  /* 工具提示 */
  .tooltip {
    @apply absolute z-tooltip px-3 py-2 text-sm text-white;
    @apply bg-gray-900 dark:bg-gray-700 rounded-lg shadow-lg;
    @apply opacity-0 invisible transition-all duration-200;
  }

  .tooltip-trigger:hover .tooltip {
    @apply opacity-100 visible;
  }
}

/* ========================================
   工具类扩展
   ======================================== */

@layer utilities {
  /* 文本颜色 - 交易专用 */
  .text-up {
    color: var(--trend-up);
  }

  .text-down {
    color: var(--trend-down);
  }

  .text-neutral {
    color: var(--trend-neutral);
  }

  /* 背景渐变 - 信号专用 */
  .bg-signal-strong-buy {
    background: var(--signal-strong-buy);
  }

  .bg-signal-buy {
    background: var(--signal-buy);
  }

  .bg-signal-hold {
    background: var(--signal-hold);
  }

  .bg-signal-sell {
    background: var(--signal-sell);
  }

  .bg-signal-strong-sell {
    background: var(--signal-strong-sell);
  }

  /* 滚动条样式 */
  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    @apply bg-gray-100 dark:bg-gray-800;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    @apply bg-gray-300 dark:bg-gray-600 rounded-full;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-400 dark:bg-gray-500;
  }

  /* 动画延迟 */
  .animation-delay-100 {
    animation-delay: 100ms;
  }

  .animation-delay-200 {
    animation-delay: 200ms;
  }

  .animation-delay-300 {
    animation-delay: 300ms;
  }

  /* 响应式隐藏 */
  .hide-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .hide-scrollbar::-webkit-scrollbar {
    display: none;
  }
}

/* ========================================
   无障碍访问
   ======================================== */

/* 尊重用户对动画的偏好 */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* 焦点可见性 (仅在使用键盘时显示) */
:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

/* 高对比度模式支持 */
@media (prefers-contrast: high) {
  :root {
    --color-primary: #1E40AF;
    --trend-up: #047857;
    --trend-down: #B91C1C;
  }
}

/* ========================================
   打印样式
   ======================================== */

@media print {
  body {
    background: white;
    color: black;
  }

  .no-print {
    display: none !important;
  }

  a[href]:after {
    content: " (" attr(href) ")";
  }
}
